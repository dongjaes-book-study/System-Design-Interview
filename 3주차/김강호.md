# 9장 웹크롤러설계

### 웹 크롤러 이용 사례
- 검색 엔진 인덱싱
- 웹 아카이빙
- 웹 마이닝
- 웹 모니터링

### 웹 크롤러 작업 흐름
1. URL 큐에 시작 URL 추가
2. URL 큐에서 URL 가져오기
3. URL 접속하여 웹 페이지 내용 다운로드
4. 웹 페이지 내용 파싱하여 올바른 형식을 갖춘 페이지인지 검증
5. 중복 컨텐츠 확인
   - 이미 저장소에 있는 콘텐츠인 경우 return
   - 저장소에 없는 콘텐츠인 경우 저장소에 저장 후 URL 추출기로 전달


### BFS vs DFS
- 웹 크롤러의 경우 보통 BFS 사용


# 10장알림시스템설계

### 알림 시스템 설계
1. API를 호출하여 알림 서버로 알림을 보낸다.
2. 알림 서버는 사용자 정보, 단말 토큰, 알림 설정 같은 메타데이터를 캐시나 DB에서 가져온다
3. 알림 서버는 전송할 알림에 맞는 이벤트를 만들어 해당 이벤트를 위한 큐에 넣는다. ex) iOS 푸시 알림 이벤트는 iOS 푸시 알림 큐에 삽입
4. 작업 서버는 메시지 큐에서 알림 이벤트를 꺼낸다.
5. 작업 서버는 알림을 제3자 서비스로 보낸다. (APNS, Firebase, SNS, Email 서비스 등)
6. 제3자 서비스는 알림을 받아서 사용자에게 전달한다.

### 상세 설계

#### 데이터 손실 방지
- 알림 전송 데이터는 어떠한 상황에서도 소실되면 안된다.
- 알림이 지연되거나 순서가 틀려져도 괜찮지만 소실되면 안된다.
- 이를 위해 알림 데이터를 DB에 보관하고 재시도 메커니즘을 구현한다(Message Queue 활용)

#### 알림 중복 전송 방지
- 알림 중복 전송을 방지하기 위해 노력해야 하지만 100% 방지하는 것은 불가능하다.


### 추가 컴포넌트 및 고려사항
- 알림 템플릿
- 알림 설정
- 전송률 제한
- 재시도 방법
- 푸시 알림과 보안
- 큐 모니터링
- 이벤트 추적


# 11장뉴스피드시스템설계




# 12장채팅시스템설계


